# why - DoT 与历史战斗稳定性修复

## 背景
用户在持续战斗调试期间反馈两个高优先级问题：

1. **历史战斗无法稳定查看**：历史记录会被“空白战斗”不断覆盖，导致往前翻几乎全是空白条目。
2. **DoT 统计仍明显不对**：同职业之间出现 DoT 极端偏高/为零的情况，且与实际伤害不符，需要更接近 ACT 的归因行为。

## 目标（成功标准）
- **历史战斗稳定**：不再出现持续生成“0 参与 / 0 伤害”的空白战斗挤占历史。
- **DoT 归因更保守更正确**：在多来源同一 DoT 状态并存等场景下，宁可回退为“未知来源 DoT”，也不把 tick 错算到某个玩家名下。
- **具备对齐 ACT 的 DoT 参照**：ACT MCP 能提供可用的 `dotDamage` 指标，便于按 DoT 占比核对。

## 风险与约束
- ACT 侧 `ActiveEncounter` 在部分环境下可能长期保留“陈旧遭遇”，若不加过滤会触发插件误分段/空白战斗 churn。
- DoT tick 报文字段在不同通道/版本可能缺失（`sourceId`/`buffId`），需要在“覆盖率”和“误归因风险”之间取舍。

