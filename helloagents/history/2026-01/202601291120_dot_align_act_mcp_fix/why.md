# why - DoT 对齐 ACT（比例/归因）与历史稳定性修复

## 背景
用户希望在 Dalamud 内的伤害/DoT 统计与 ACT 尽可能一致，并以 ACT 的统计作为权威参照进行修正与核对。

在持续战斗调试期间暴露了几个阻塞问题：
1. **ACT MCP 的 `dotDamage` 长期为 0**：无法用 “DoT 占比/比例” 与 ACT 进行核对。
2. **DoT 统计异常**：出现同职业 DoT 极端偏高/为零、以及 DoT 与实际伤害不符等问题。
3. **历史战斗不稳定**：空白战斗不断覆盖历史记录，导致翻页几乎全是空白。
4. **actdll init 崩溃**：在游戏进程内尝试调用 `FFXIV_ACT_Plugin.InitPlugin` 触发 WinForms 清理阶段异常并崩溃。

## 目标（成功标准）
- **ACT MCP 可用 DoT 参照**：`act/status` 的 `dotDamage` 在非 0 场景下应与 ACT UI 口径一致，支持 DoT 比例核对。
- **DoT 归因更接近 ACT**：缺字段与复杂场景下尽量提高归因覆盖率，同时降低“错归因到某个玩家导致极端偏差”的概率。
- **历史战斗稳定**：不再持续生成/筛选出仅建档但 0 伤害的空白战斗挤占历史。
- **actdll init 可恢复**：实验性的 InitPlugin 试跑不再导致游戏进程崩溃；失败应被记录并可继续游戏/继续调试。

## 风险与约束
- 在游戏进程内“复用/反编译/引用” ACT/FFXIV_ACT_Plugin 属于高风险实验：WinForms/线程模型/宿主环境不匹配时可能导致崩溃。
- DoT tick 在不同通道/版本可能缺失 `sourceId/buffId`；且同 `statusId` 多来源并存时，本地无法保证 100% 复刻 ACT 的精确归因，需要在覆盖率与误归因风险之间取舍。

